###################################################################################################

- name: verify

  assert:
    that:

      - logrotate_name is defined
      - logrotate_name is not none
      - logrotate_name | trim | length > 0

      - logrotate_file is defined
      - logrotate_file is not none
      - logrotate_file | trim | length > 0

      - logrotate_frequency is not none
      - logrotate_frequency in ['daily', 'weekly', 'monthly', 'yearly']

  tags:
    - artemis
    - logging
    - logrotate

###################################################################################################

- name: family

  when: os_family_is_debian
     or os_family_is_redhat

  include: '{{ os_family_lower }}{{ yaml_file_extension }}'
  static : false

  tags:
    - artemis
    - logging
    - logrotate

###################################################################################################

- name: configure

  become: true

  template: src={{ logrotate_src   }}
           dest={{ logrotate_dest  }}
           mode={{ logrotate_mode  }}

  tags:
    - artemis
    - logging
    - logrotate

###################################################################################################
